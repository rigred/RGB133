<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Vision Utils: include/Capture.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>include/Capture.h</h1><a href="Capture_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Capture.h</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (c) 2011 Datapath Limited</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * This file forms part of the Vision / VisionLC driver capture</span>
<a name="l00007"></a>00007 <span class="comment"> * application sample source code.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * Purpose: Declares capture app main defines, structures and</span>
<a name="l00010"></a>00010 <span class="comment"> * functions.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> */</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;linux/videodev2.h&gt;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#include "<a class="code" href="CaptureTypes_8h.html">CaptureTypes.h</a>"</span>
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="Capture_8h.html#fab7e80b660d9cc4150a9992888bd56d">00020</a> <span class="preprocessor">#define NUM_STREAMING_BUFFERS 4</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a><a class="code" href="Capture_8h.html#3eeb09936e8b8b09aaad26ff2c859eb7">00022</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#3eeb09936e8b8b09aaad26ff2c859eb7">BOOL</a>;
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__sBuffer.html">_sBuffer</a>
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026    <span class="comment">/* Capture Data */</span>
<a name="l00027"></a><a class="code" href="struct__sBuffer.html#b4bba204a53aa9716e77f064ad5ba904">00027</a>    <span class="keywordtype">char</span>         *<a class="code" href="struct__sBuffer.html#b4bba204a53aa9716e77f064ad5ba904">pData</a>;            
<a name="l00028"></a>00028    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  <a class="code" href="struct__sBuffer.html#d28a234584287d68ea4e8e51c560b0eb">DataLength</a>;       
<a name="l00029"></a>00029 } <a class="code" href="struct__sBuffer.html">sBuffer</a>, *<a class="code" href="struct__sBuffer.html">psBuffer</a>;
<a name="l00030"></a>00030 
<a name="l00036"></a><a class="code" href="struct__sCapture.html">00036</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__sCapture.html">_sCapture</a>
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038    <span class="comment">/* File Descriptors */</span>
<a name="l00039"></a><a class="code" href="struct__sCapture.html#0fc7bc3b9328ed32a2e2355c8f7595d4">00039</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#0fc7bc3b9328ed32a2e2355c8f7595d4">fd</a>;               
<a name="l00040"></a><a class="code" href="struct__sCapture.html#0cd5400e54ba030d47f97ebee7ae7fb6">00040</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#0cd5400e54ba030d47f97ebee7ae7fb6">ctrlFd</a>;           
<a name="l00042"></a>00042    <span class="comment">/* Internals */</span>
<a name="l00043"></a><a class="code" href="struct__sCapture.html#f41c0a3893467798a400eed15bcbe6d9">00043</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#f41c0a3893467798a400eed15bcbe6d9">inputs</a>;           
<a name="l00044"></a><a class="code" href="struct__sCapture.html#6c4955c3143ec8a52272b694a5772e6c">00044</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#6c4955c3143ec8a52272b694a5772e6c">standards</a>;        
<a name="l00045"></a><a class="code" href="struct__sCapture.html#d42b824a14cd841f01ac25f1114d6de9">00045</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#d42b824a14cd841f01ac25f1114d6de9">formats</a>;          
<a name="l00047"></a><a class="code" href="struct__sCapture.html#85ba968c84bd86ad3654c1364f9bd1b2">00047</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>              <a class="code" href="struct__sCapture.html#85ba968c84bd86ad3654c1364f9bd1b2">source_width</a>;     
<a name="l00048"></a><a class="code" href="struct__sCapture.html#0733c34ddd95da83b765e43cbf3d70f4">00048</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>              <a class="code" href="struct__sCapture.html#0733c34ddd95da83b765e43cbf3d70f4">source_height</a>;    
<a name="l00050"></a><a class="code" href="struct__sCapture.html#a06f3280921a3feb27893c94969db90e">00050</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>              <a class="code" href="struct__sCapture.html#a06f3280921a3feb27893c94969db90e">output_width</a>;     
<a name="l00051"></a><a class="code" href="struct__sCapture.html#a39ba17cbed01b022891692bc52ce3a2">00051</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>              <a class="code" href="struct__sCapture.html#a39ba17cbed01b022891692bc52ce3a2">output_height</a>;    
<a name="l00052"></a><a class="code" href="struct__sCapture.html#89cfa53ef72332e4cbd5262f049e9247">00052</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>               <a class="code" href="struct__sCapture.html#89cfa53ef72332e4cbd5262f049e9247">output_pixfmt</a>;    
<a name="l00054"></a><a class="code" href="struct__sCapture.html#e7a768bf0c5ca3054d266daf7fd38427">00054</a>    <a class="code" href="CaptureTypes_8h.html#ea77d0e0e22d11ec371d13d6c187b75b">eIOType</a>                    <a class="code" href="struct__sCapture.html#e7a768bf0c5ca3054d266daf7fd38427">ioType</a>;           
<a name="l00056"></a><a class="code" href="struct__sCapture.html#e401f9095d991b5518f74d204fee15a8">00056</a>    <span class="keywordtype">float</span>                      <a class="code" href="struct__sCapture.html#e401f9095d991b5518f74d204fee15a8">fFrameRate</a>;       
<a name="l00058"></a><a class="code" href="struct__sCapture.html#4758d737618eb39d7554a750310720c8">00058</a>    <a class="code" href="Capture_8h.html#3eeb09936e8b8b09aaad26ff2c859eb7">BOOL</a>                       <a class="code" href="struct__sCapture.html#4758d737618eb39d7554a750310720c8">CroppingActive</a>;   
<a name="l00059"></a><a class="code" href="struct__sCapture.html#3c68852e74cb68686fcdb79982143213">00059</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#3c68852e74cb68686fcdb79982143213">CroppingLeft</a>;     
<a name="l00060"></a><a class="code" href="struct__sCapture.html#8e594b2fcb85714434d98a86dc893836">00060</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#8e594b2fcb85714434d98a86dc893836">CroppingTop</a>;      
<a name="l00061"></a><a class="code" href="struct__sCapture.html#95665907219daec88477d7f2bd57bdae">00061</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#95665907219daec88477d7f2bd57bdae">CroppingWidth</a>;    
<a name="l00062"></a><a class="code" href="struct__sCapture.html#ade2e348785c5a106a30e3d3320268ad">00062</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#ade2e348785c5a106a30e3d3320268ad">CroppingHeight</a>;   
<a name="l00064"></a><a class="code" href="struct__sCapture.html#fe9c08a3712cc99dd0155b53be25f34a">00064</a>    <a class="code" href="Capture_8h.html#3eeb09936e8b8b09aaad26ff2c859eb7">BOOL</a>                       <a class="code" href="struct__sCapture.html#fe9c08a3712cc99dd0155b53be25f34a">ComposingActive</a>;  
<a name="l00065"></a><a class="code" href="struct__sCapture.html#c7295fe2ede7cd6671a6bc933529488b">00065</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#c7295fe2ede7cd6671a6bc933529488b">ComposeLeft</a>;      
<a name="l00066"></a><a class="code" href="struct__sCapture.html#0d8687e02ed63140f1b5a00d607df087">00066</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#0d8687e02ed63140f1b5a00d607df087">ComposeTop</a>;       
<a name="l00067"></a><a class="code" href="struct__sCapture.html#deab540033b0cd9acbbd5e8e205a4088">00067</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#deab540033b0cd9acbbd5e8e205a4088">ComposeWidth</a>;     
<a name="l00068"></a><a class="code" href="struct__sCapture.html#4289cea196510d9782cc0840b2397fb8">00068</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#4289cea196510d9782cc0840b2397fb8">ComposeHeight</a>;    
<a name="l00070"></a><a class="code" href="struct__sCapture.html#ac8f2c7efdc7ff4956e03876c0bed425">00070</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#ac8f2c7efdc7ff4956e03876c0bed425">capture_count</a>;    
<a name="l00072"></a><a class="code" href="struct__sCapture.html#1581ddd4f3cfd4f74a7620fd9428bd74">00072</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#1581ddd4f3cfd4f74a7620fd9428bd74">timestamp</a>;        
<a name="l00074"></a><a class="code" href="struct__sCapture.html#a34a9494cf2b35ceed1a339700b9fc32">00074</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#a34a9494cf2b35ceed1a339700b9fc32">livestream</a>;       
<a name="l00076"></a><a class="code" href="struct__sCapture.html#3583565e35252c1ca6ddcbc9d998f341">00076</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#3583565e35252c1ca6ddcbc9d998f341">ganging_type</a>;     
<a name="l00078"></a><a class="code" href="struct__sCapture.html#78d2554ddc8d57fda1048dd633e134f6">00078</a>    <span class="keywordtype">int</span>                        <a class="code" href="struct__sCapture.html#78d2554ddc8d57fda1048dd633e134f6">delay</a>;            
<a name="l00080"></a>00080    <span class="comment">/* video4linux structures */</span>
<a name="l00081"></a><a class="code" href="struct__sCapture.html#9f980c189ebf1460e711142957bcf1c0">00081</a>    <span class="keyword">struct </span>v4l2_capability     caps;             
<a name="l00083"></a><a class="code" href="struct__sCapture.html#ca5d5288dbafbccedce2b101cc353cd1">00083</a>    <span class="keyword">struct </span>v4l2_input         *<a class="code" href="struct__sCapture.html#ca5d5288dbafbccedce2b101cc353cd1">pInputs</a>;          
<a name="l00085"></a><a class="code" href="struct__sCapture.html#26ae88062f551845e7b9d7b23ed7732b">00085</a>    v4l2_std_id                <a class="code" href="struct__sCapture.html#26ae88062f551845e7b9d7b23ed7732b">standard</a>;         
<a name="l00086"></a><a class="code" href="struct__sCapture.html#26bead8bc59b9f86af66e677f1e69130">00086</a>    <span class="keyword">struct </span>v4l2_standard      *<a class="code" href="struct__sCapture.html#26bead8bc59b9f86af66e677f1e69130">pStandards</a>;       
<a name="l00088"></a><a class="code" href="struct__sCapture.html#2f99b5f4e58a5e92daef4d7f5ac37a19">00088</a>    <span class="keyword">struct </span>v4l2_fmtdesc       *<a class="code" href="struct__sCapture.html#2f99b5f4e58a5e92daef4d7f5ac37a19">pFormats</a>;         
<a name="l00090"></a><a class="code" href="struct__sCapture.html#39ced2e929f56840c04e7b11a5ecf988">00090</a>    <span class="keyword">struct </span>v4l2_format         src_fmt;          
<a name="l00091"></a><a class="code" href="struct__sCapture.html#8ff277e58f22a1b6739fe85fe1596069">00091</a>    <span class="keyword">struct </span>v4l2_format         fmt;              
<a name="l00093"></a><a class="code" href="struct__sCapture.html#16fd76e08c47f58270af077f852cbf06">00093</a>    <span class="keyword">struct </span>v4l2_streamparm     StrmParm;         
<a name="l00095"></a>00095    <span class="comment">/* mmap internals */</span>
<a name="l00096"></a><a class="code" href="struct__sCapture.html#4ed1e1db95ef61e3cbfee68c06e16e14">00096</a>    <span class="keyword">struct </span>v4l2_requestbuffers req;
<a name="l00097"></a><a class="code" href="struct__sCapture.html#1fae6bfdcac204719720fef9347e2606">00097</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>               <a class="code" href="struct__sCapture.html#1fae6bfdcac204719720fef9347e2606">buffers</a>;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099    <span class="comment">/* Capture Buffers */</span>
<a name="l00100"></a><a class="code" href="struct__sCapture.html#127660c15914718025ee7997a221f751">00100</a>    <a class="code" href="struct__sBuffer.html">sBuffer</a>                    <a class="code" href="struct__sCapture.html#127660c15914718025ee7997a221f751">pBuffers</a>[<a class="code" href="Capture_8h.html#fab7e80b660d9cc4150a9992888bd56d">NUM_STREAMING_BUFFERS</a>];
<a name="l00101"></a>00101 
<a name="l00102"></a>00102    <span class="comment">/* Capture Thread */</span>
<a name="l00103"></a><a class="code" href="struct__sCapture.html#0ac303cfafa1bbeeddf7a92512f4244e">00103</a>    pthread_t               <a class="code" href="struct__sCapture.html#0ac303cfafa1bbeeddf7a92512f4244e">CaptureThread</a>;    
<a name="l00104"></a>00104 } <a class="code" href="struct__sCapture.html">sCapture</a>, *<a class="code" href="struct__sCapture.html">psCapture</a>;
<a name="l00105"></a>00105 
<a name="l00116"></a>00116 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#e187b90c9ab74448d17af5cbbd5afff3">OpenCaptureDevice</a>(<span class="keywordtype">char</span>* device, <a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture, <a class="code" href="Capture_8h.html#3eeb09936e8b8b09aaad26ff2c859eb7">BOOL</a> bBlock);
<a name="l00117"></a>00117 
<a name="l00125"></a>00125 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#269745cd0d528279e695e6245675679e">OpenCaptureDeviceControl</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture, <span class="keyword">const</span> <span class="keywordtype">char</span>* ctrlDevice);
<a name="l00126"></a>00126 
<a name="l00135"></a>00135 <span class="keywordtype">void</span> <a class="code" href="Capture_8h.html#70999d21cf9cba87e7513ad225e92f41">CloseCaptureDevice</a>(<span class="keywordtype">int</span> fd, <a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture);
<a name="l00136"></a>00136 
<a name="l00142"></a>00142 <span class="keywordtype">void</span> <a class="code" href="Capture_8h.html#a5c348b8bd6cbff79961aab6d3e9525e">CloseCaptureDeviceControl</a>(<span class="keywordtype">int</span> fd);
<a name="l00143"></a>00143 
<a name="l00150"></a>00150 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#95ccbfb78416121353034ce553f3941f">InitialiseReadCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buffer_size);
<a name="l00151"></a>00151 
<a name="l00158"></a>00158 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#874c690a8b26f9133303818f37009920">UninitialiseReadCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture);
<a name="l00159"></a>00159 
<a name="l00166"></a>00166 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#d9c81ca1c4c7610a71773a7db7aff659">InitialiseMmapCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buffer_size);
<a name="l00167"></a>00167 
<a name="l00174"></a>00174 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#6f89dd6def14eee7d40c0824b094f0a7">InitialiseUserPtrCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buffer_size);
<a name="l00175"></a>00175 
<a name="l00182"></a>00182 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#60475b15bcc2b6246d7b46d18dcddff0">UninitialiseMmapCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture);
<a name="l00183"></a>00183 
<a name="l00190"></a>00190 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#8f2b074dc39118a4a32364182d590290">UninitialiseUserptrCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture);
<a name="l00191"></a>00191 
<a name="l00199"></a>00199 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#2646d186dcb3c2ad0565196bc571f57a">InitialiseCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture);
<a name="l00200"></a>00200 
<a name="l00209"></a>00209 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#cae4622ab88f429fbaf6fb4810ff2dd1">StartCapture</a>(<a class="code" href="Capture_8h.html#1a2dd8fb6ba70b55df40ffe1dc5d0592">psCapture</a> pCapture);
<a name="l00210"></a>00210 
<a name="l00217"></a>00217 <span class="keywordtype">int</span> <a class="code" href="Capture_8h.html#5fb866fca5bb4eddd5a740b491e0bca1">IsSupportedPixelFormat</a>(<span class="keywordtype">char</span>* pixfmt);
<a name="l00218"></a>00218 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Apr 13 14:13:23 2023 for Vision Utils by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
